<h2 mat-dialog-title>{{ isEditMode ? ('user.dialog.edit' | translate) : ('user.dialog.create' | translate) }}</h2>

<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
  <mat-dialog-content>
    <div class="form-container">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'user.form.username' | translate }}</mat-label>
        <input matInput formControlName="username" required #firstInput>
        <mat-error *ngIf="userForm.get('username')?.hasError('required')">
          {{ 'user.validation.required.username' | translate }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'user.form.email' | translate }}</mat-label>
        <input matInput formControlName="email" required type="email">
        <mat-error *ngIf="userForm.get('email')?.hasError('required')">
          {{ 'user.validation.required.email' | translate }}
        </mat-error>
        <mat-error *ngIf="userForm.get('email')?.hasError('email')">
          {{ 'user.validation.email' | translate }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'user.form.password' | translate }}</mat-label>
        <input matInput formControlName="password" [required]="!isEditMode" type="password">
        <mat-error *ngIf="userForm.get('password')?.hasError('required')">
          {{ 'user.validation.required.password' | translate }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'user.form.roles' | translate }}</mat-label>
        <mat-select formControlName="roleNames" multiple required>
          <mat-option *ngFor="let role of availableRoles" [value]="role">
            {{ role }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="userForm.get('roleNames')?.hasError('required')">
          {{ 'user.validation.required.roles' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="onCancel()" cdkFocusInitial>
      {{ 'common.cancel' | translate }}
    </button>
    <button mat-raised-button color="primary" type="submit" [disabled]="!userForm.valid">
      {{ 'common.save' | translate }}
    </button>
  </mat-dialog-actions>
</form>
